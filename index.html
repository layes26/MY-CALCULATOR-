<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Premium Calculator</title>
        <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#f59e0b">
    <link rel="apple-touch-icon" href="icon-512.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');
        
        * { font-family: 'Inter', sans-serif; }
        
        body {
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            background: linear-gradient(145deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%);
        }

        .glass-display {
            background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.08);
            box-shadow: 
                0 8px 32px rgba(0,0,0,0.3),
                inset 0 1px 0 rgba(255,255,255,0.1);
        }

        .calc-btn {
            transition: all 0.15s ease;
            position: relative;
            overflow: hidden;
        }
        
        .calc-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, rgba(255,255,255,0.15) 0%, transparent 50%);
            border-radius: inherit;
            pointer-events: none;
        }

        .calc-btn:active {
            transform: scale(0.92);
            filter: brightness(0.85);
        }

        .num-btn {
            background: linear-gradient(145deg, #2d2d44 0%, #1e1e2f 100%);
            box-shadow: 
                0 4px 15px rgba(0,0,0,0.3),
                inset 0 1px 0 rgba(255,255,255,0.1);
        }
        
        .num-btn:hover { background: linear-gradient(145deg, #3a3a55 0%, #2a2a3f 100%); }

        .op-btn {
            background: linear-gradient(145deg, #f59e0b 0%, #d97706 100%);
            box-shadow: 
                0 4px 15px rgba(245,158,11,0.3),
                inset 0 1px 0 rgba(255,255,255,0.2);
        }
        
        .op-btn:hover { background: linear-gradient(145deg, #fbbf24 0%, #f59e0b 100%); }

        .func-btn {
            background: linear-gradient(145deg, #4a4a5a 0%, #3a3a4a 100%);
            box-shadow: 
                0 4px 15px rgba(0,0,0,0.2),
                inset 0 1px 0 rgba(255,255,255,0.1);
        }
        
        .func-btn:hover { background: linear-gradient(145deg, #5a5a6a 0%, #4a4a5a 100%); }

        .equal-btn {
            background: linear-gradient(145deg, #10b981 0%, #059669 100%);
            box-shadow: 
                0 4px 20px rgba(16,185,129,0.4),
                inset 0 1px 0 rgba(255,255,255,0.2);
        }
        
        .equal-btn:hover { background: linear-gradient(145deg, #34d399 0%, #10b981 100%); }

        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .glow-text {
            text-shadow: 0 0 20px rgba(255,255,255,0.3);
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 4px 20px rgba(16,185,129,0.4); }
            50% { box-shadow: 0 4px 30px rgba(16,185,129,0.6); }
        }
        
        .equal-btn { animation: pulse-glow 2s infinite; }
    </style>
</head>
<body class="min-h-screen w-screen flex flex-col text-white overflow-hidden select-none">

    <!-- Main Container -->
    <div class="flex-1 flex flex-col max-w-md mx-auto w-full h-screen p-4 py-6">
        
        <!-- Header -->
        <div class="flex items-center justify-between mb-4 px-2">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-amber-400 to-amber-600 flex items-center justify-center shadow-lg">
                    <i class="fas fa-calculator text-white text-sm"></i>
                </div>
                <span class="text-gray-400 text-sm font-medium tracking-wide">Calculator</span>
            </div>
            <div class="flex gap-1.5">
                <div class="w-3 h-3 rounded-full bg-red-500/80"></div>
                <div class="w-3 h-3 rounded-full bg-yellow-500/80"></div>
                <div class="w-3 h-3 rounded-full bg-green-500/80"></div>
            </div>
        </div>

        <!-- Display Area -->
        <div class="flex-1 flex flex-col justify-end mb-6 p-6 glass-display rounded-3xl min-h-[180px]">
            <!-- History -->
            <div id="history" class="text-gray-500 text-right text-xl mb-2 h-7 font-light truncate tracking-wide"></div>
            <!-- Current Display -->
            <div id="display" class="text-right text-6xl font-light tracking-tight break-all hide-scrollbar overflow-x-auto whitespace-nowrap glow-text">
                0
            </div>
        </div>

        <!-- Keypad -->
        <div class="grid grid-cols-4 gap-3 pb-6">
            
            <!-- Row 1 -->
            <button onclick="clearDisplay()" class="calc-btn func-btn text-amber-400 text-xl font-semibold rounded-2xl h-16">AC</button>
            <button onclick="toggleSign()" class="calc-btn func-btn text-white text-xl font-medium rounded-2xl h-16">+/−</button>
            <button onclick="appendOperator('%')" class="calc-btn func-btn text-white text-xl font-medium rounded-2xl h-16">%</button>
            <button onclick="appendOperator('/')" class="calc-btn op-btn text-white text-2xl font-medium rounded-2xl h-16">÷</button>

            <!-- Row 2 -->
            <button onclick="appendNumber('7')" class="calc-btn num-btn text-white text-2xl font-normal rounded-2xl h-16">7</button>
            <button onclick="appendNumber('8')" class="calc-btn num-btn text-white text-2xl font-normal rounded-2xl h-16">8</button>
            <button onclick="appendNumber('9')" class="calc-btn num-btn text-white text-2xl font-normal rounded-2xl h-16">9</button>
            <button onclick="appendOperator('*')" class="calc-btn op-btn text-white text-2xl font-medium rounded-2xl h-16">×</button>

            <!-- Row 3 -->
            <button onclick="appendNumber('4')" class="calc-btn num-btn text-white text-2xl font-normal rounded-2xl h-16">4</button>
            <button onclick="appendNumber('5')" class="calc-btn num-btn text-white text-2xl font-normal rounded-2xl h-16">5</button>
            <button onclick="appendNumber('6')" class="calc-btn num-btn text-white text-2xl font-normal rounded-2xl h-16">6</button>
            <button onclick="appendOperator('-')" class="calc-btn op-btn text-white text-2xl font-medium rounded-2xl h-16">−</button>

            <!-- Row 4 -->
            <button onclick="appendNumber('1')" class="calc-btn num-btn text-white text-2xl font-normal rounded-2xl h-16">1</button>
            <button onclick="appendNumber('2')" class="calc-btn num-btn text-white text-2xl font-normal rounded-2xl h-16">2</button>
            <button onclick="appendNumber('3')" class="calc-btn num-btn text-white text-2xl font-normal rounded-2xl h-16">3</button>
            <button onclick="appendOperator('+')" class="calc-btn op-btn text-white text-2xl font-medium rounded-2xl h-16">+</button>

            <!-- Row 5 -->
            <button onclick="appendNumber('0')" class="calc-btn num-btn col-span-2 text-white text-2xl font-normal rounded-2xl h-16">0</button>
            <button onclick="appendNumber('.')" class="calc-btn num-btn text-white text-2xl font-normal rounded-2xl h-16">.</button>
            <button onclick="calculate()" class="calc-btn equal-btn text-white text-2xl font-semibold rounded-2xl h-16">=</button>
        </div>

        <!-- Footer -->
        <div class="text-center text-gray-600 text-xs pb-2">
            <i class="fas fa-keyboard mr-1 text-[10px]"></i> Keyboard supported
        </div>
    </div>

    <script>
        let currentInput = '0';
        let previousInput = '';
        let operator = null;
        let shouldResetScreen = false;

        const displayElement = document.getElementById('display');
        const historyElement = document.getElementById('history');

        function formatNumber(num) {
            if (num.includes('.')) {
                let [int, dec] = num.split('.');
                return Number(int).toLocaleString() + '.' + dec;
            }
            return Number(num).toLocaleString();
        }

        function updateDisplay() {
            displayElement.innerText = formatNumber(currentInput);
            displayElement.scrollLeft = displayElement.scrollWidth;
        }

        function appendNumber(number) {
            if (currentInput === '0' || shouldResetScreen) {
                currentInput = number === '.' ? '0.' : number;
                shouldResetScreen = false;
            } else {
                if (number === '.' && currentInput.includes('.')) return;
                if (currentInput.replace(/[^0-9]/g, '').length > 12) return;
                currentInput += number;
            }
            updateDisplay();
        }

        function appendOperator(op) {
            if (operator !== null && !shouldResetScreen) calculate();
            operator = op;
            previousInput = currentInput;
            
            let visualOp = op;
            if(op === '*') visualOp = '×';
            if(op === '/') visualOp = '÷';
            
            historyElement.innerText = `${formatNumber(previousInput)} ${visualOp}`;
            shouldResetScreen = true;
        }

        function toggleSign() {
            if (currentInput === '0') return;
            currentInput = currentInput.startsWith('-') 
                ? currentInput.slice(1) 
                : '-' + currentInput;
            updateDisplay();
        }

        function deleteLast() {
            if (shouldResetScreen) return;
            currentInput = currentInput.length === 1 ? '0' : currentInput.slice(0, -1);
            updateDisplay();
        }

        function clearDisplay() {
            currentInput = '0';
            previousInput = '';
            operator = null;
            historyElement.innerText = '';
            shouldResetScreen = false;
            updateDisplay();
        }

        function calculate() {
            if (operator === null || shouldResetScreen) return;
            
            const prev = parseFloat(previousInput);
            const current = parseFloat(currentInput);
            
            if (isNaN(prev) || isNaN(current)) return;

            let result;
            switch (operator) {
                case '+': result = prev + current; break;
                case '-': result = prev - current; break;
                case '*': result = prev * current; break;
                case '/':
                    if (current === 0) {
                        displayElement.innerText = 'Error';
                        setTimeout(clearDisplay, 1500);
                        return;
                    }
                    result = prev / current;
                    break;
                case '%': result = prev % current; break;
                default: return;
            }

            result = Math.round(result * 100000000) / 100000000;
            currentInput = result.toString();
            operator = null;
            previousInput = '';
            historyElement.innerText = '';
            shouldResetScreen = true;
            updateDisplay();
        }

        document.addEventListener('keydown', (e) => {
            const key = e.key;
            if (key >= '0' && key <= '9') appendNumber(key);
            if (key === '.') appendNumber('.');
            if (key === '=' || key === 'Enter') { e.preventDefault(); calculate(); }
            if (key === 'Backspace') deleteLast();
            if (key === 'Escape') clearDisplay();
            if (key === '+') appendOperator('+');
            if (key === '-') appendOperator('-');
            if (key === '*') appendOperator('*');
            if (key === '/') { e.preventDefault(); appendOperator('/'); }
        });
    </script>
</body>

</html>

